<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!--
        child-src is fallback of worker-src for Safari < 15.5
        script-src is fallback of script-src-elem for Safari
        style-src is fallback of style-src-attr for Safari
        'unsafe-eval' is fallback of 'wasm-unsafe-eval' for Safari < 16
    -->
    <meta http-equiv="content-security-policy" content="
        default-src 'self';
        worker-src 'self' blob:;
        child-src 'self' blob:;
        connect-src 'self' https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.3.1/ https://mlts.dynamsoft.com https://slts.dynamsoft.com;
        script-src-elem 'self' https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.3.1/ 'unsafe-inline';
        script-src 'self' https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.3.1/ 'unsafe-inline' 'wasm-unsafe-eval' 'unsafe-eval';
        style-src-attr 'self' 'unsafe-inline';
        style-src 'self' 'unsafe-inline';
        img-src 'self' data: blob:;
        media-src 'self' data:;
    " />
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.3.1/dist/dbr.js"></script>
    <script>
        // Specifies a license, you can visit https://www.dynamsoft.com/customer/license/trialLicense?ver=9.3.1&utm_source=github&product=dbr&package=js to get your own trial license good for 30 days. 
        Dynamsoft.DBR.BarcodeScanner.license = 'DLS2eyJvcmdhbml6YXRpb25JRCI6IjIwMDAwMSJ9';
        // Initializes and uses the SDK
        (async () => {
            let scanner = await Dynamsoft.DBR.BarcodeScanner.createInstance();
            scanner.onFrameRead = results => {
                if (results.length > 0) console.log(results);
            };
            scanner.onUniqueRead = (txt, result) => {
                alert(txt);
            };
            await scanner.show();
        })();
    </script>
</body>

</html>